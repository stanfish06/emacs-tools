# -*- mode: snippet -*-
# name: python-org-plot
# key: pyplot
# --
#+BEGIN_SRC python :session :tangle 'buffer.py' :results file link :file ${1:plot.png}
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
${2:# code here}
$0
plt.savefig("$1", dpi=300, bbox_inches="tight")
plt.close()
"$1" # Avoid using async as image needs time to save. If really want to do so, sleep a bit.
#+END_SRC
